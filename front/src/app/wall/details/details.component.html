<div id="frame" [ngClass]="theme.typeC">

  <div class="filler"></div>

  <div id="info" [ngClass]="theme.fontB">

    <div id="restaurant" class="verticalSection" [ngClass]="theme.borderRightB">

      <div id="restaurantName" class="infoHeader">{{lunch.restaurant.name}}</div>

      <div id="restaurantDetails" class="infoDetails">

        tel:&nbsp; {{lunch.restaurant.phone}}<br>
        avg:&nbsp; {{lunch.restaurant.avgDeliveryTime}} min<br>

        <a target="_blank"
           [ngClass]="theme.fontB"
           [href]="'http://' + lunch.restaurant.link">website
        </a>

      </div>

    </div>

    <div id="lunchmaster" class="verticalSection" [ngClass]="theme.borderRightB">

      <div id="lunchmasterName" class="infoHeader">
        {{lunch.lunchMaster.firstName}} {{lunch.lunchMaster.lastName}}
      </div>

      <div id="lunchmasterDetails" class="infoDetails">
        {{lunch.lunchMaster.part}}, {{lunch.lunchMaster.group}}, {{lunch.lunchMaster.floor}} floor<br>
        bank:&nbsp; {{lunch.lunchMaster.bankAccount}}<br>
        tel:&nbsp; {{lunch.lunchMaster.mobile}}
      </div>

    </div>

    <div id="delivery" class="verticalSection">

      <div id="deadlineLabel" class="labels">Deadline</div>
      <div id="deadlineHours" class="hours">
        {{lunch.deadline | date: 'HH:mm'}}
      </div>

      <div id="expectedLabel" class="labels">Expected</div>
      <div id="expectedHours" class="hours">
        {{lunch.deadline + lunch.expectedDelivery * 60000 | date: 'HH:mm'}}
      </div>
    </div>

  </div>

  <div id="orders" [ngClass]="theme.fontB">

    <div id="addOrder">

      <div id="addOrderHeader">Order</div>

      <div id="addDish">

        <input type="text" list="dishes"
          [ngClass]="[theme.borderB, theme.fontB]"
          [(ngModel)]="orderInput"
          (keyup.enter)="addDish()"/>

        <datalist id="dishes">
          <option *ngFor="let dish of lunch.restaurant.dishes" [value]="dish.name">{{dish.name}}</option>
        </datalist>

        <div id="addOrderButton"
          [ngClass]="[theme.borderB, theme.fontB]"
          (click)="addDish()">+
        </div>

      </div>

    </div>

    <div id="participants">

      <div id="participantsHeader">Participants</div>

      <div class="order"
        *ngFor="let order of lunch.orders; let i = index;"
        [id]="'order' + i"
        [ngClass]="[orderBelongsToUser(i) ? 'pointer' : '', theme.borderB]"
        (mouseover)="showOrderDetails(i)"
        (mouseleave)="hideOrderDetails()"
        (click)="deleteOrder(i)" >{{order.user.firstName}} {{order.user.lastName}}
      </div>

    </div>

    <div id="dishList">

      <div class="orderPosition" *ngFor="let dish of dishList; let i = index;" (click)="removeDish(i)">
        <span class="dishName">{{dish.name}}</span>
        <span class="dishPrice">{{dish.price}}</span>
      </div>

      <div id="lastRow" *ngIf="dishList.length != 0">

        <div id="total">
          <span class="dishName">Total</span>
          <span class="dishPrice">{{total()}}</span>
        </div>

        <div id="placeOrder" [ngClass]="theme.borderB" (click)="placeOrder()" >ORDER</div>

      </div>

    </div>
  </div>

  <div id="lunchmasterButtons" *ngIf="userIsLunchmaster()">

    <div id="list" class="lunchmasterButton" title="Shows list of all orders from this lunch"
         [ngClass]="[theme.borderB, theme.fontB]" (click)="showList()">LIST</div>

    <div id="delete" class="lunchmasterButton" title="Delete lunch"
         [ngClass]="[theme.borderB, theme.fontB]" (click)="deleteLunch()" >DELETE</div>

    <div id="edit" class="lunchmasterButton" title="Edit lunch"
         [ngClass]="[theme.borderB, theme.fontB]" (click)="editLunch()" >EDIT</div>

    <div id="closeLunch" class="lunchmasterButton" title="Close lunch"
         [ngClass]="[theme.borderB, theme.fontB]">CLOSE</div>

  </div>

  <div style="height: 5px"></div>

  <div id="close" [ngClass]="theme.borderB"
       [ngStyle]="{ borderTop : 'none'}" (click)="clickClose()" >&#x25B2;</div>

</div>

<div id="orderDetails" *ngIf="orderDetailsIndex != -1"
     [ngClass]="[theme.typeB, theme.borderB]" #orderDetails>

  <div *ngFor="let dish of activeOrder().dishes">
    <span class="dishName">{{dish.name}}</span>
    <span class="dishPrice">{{dish.price}}</span>
  </div>

  <div id="orderDetailTotal">
    <span class="dishName">Total</span>
    <span class="dishPrice">{{orderDetailsTotal()}}</span>
  </div>

</div>
